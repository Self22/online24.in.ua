{"version":3,"sources":["jquery.liLanding.js"],"names":["$","methods","init","options","p","show","linkEl","landingItem","hide","topMargin","speedFactor","extend","this","each","el","elPos","offset","top","wHalf","window","height","scrollId","on","linkItem","is","linkHref","attr","linkTarget","linkTargetPos","windowPos","scrollTop","animDuration","length","stop","animate","parseFloat","trigger","mousewheelevt","test","navigator","userAgent","document","attachEvent","e","addEventListener","clearTimeout","addClass","removeClass","setTimeout","landingItemHeight","landingItemTop","undefined","fn","liLanding","method","apply","Array","prototype","slice","call","arguments","error","jQuery"],"mappings":"CAQA,SAAWA,GACV,GAAIC,IACHC,KAAM,SAAUC,GACf,GAAIC,IACHC,KAAM,SAAUC,EAAQC,KACxBC,KAAM,SAAUF,EAAQC,KACxBE,UAAW,EACXC,YAAa,EAKd,OAHIP,IACHH,EAAEW,OAAOP,EAAGD,GAENS,KAAKC,KAAK,WAChB,GAAIC,GAAKd,EAAEY,MACPG,EAAQD,EAAGE,SAASC,IACpBC,EAAQlB,EAAEmB,QAAQC,SAAS,EAC3BC,EAAW,YAGfrB,GAAE,aAAac,GAAIQ,GAAG,QAAQ,WAC7B,GAAIC,GAAWvB,EAAEY,KACjB,KAAIW,EAASC,GAAG,QAAQ,CACvB,GAAIC,GAAWF,EAASG,KAAK,QACzBC,EAAa3B,EAAEyB,GACfG,EAAgBD,EAAWX,SAASC,IACpCY,EAAY7B,EAAEmB,QAAQW,YACtBC,EAAeH,EAAgBC,CAChCE,GAAe,IACjBA,IAA4B,GAG1BJ,EAAWK,QACbhC,EAAE,cAAciC,MAAK,GAAMC,SAASJ,UAAWF,EAAcO,WAAW/B,EAAEK,YAAasB,EAAa3B,EAAEM,YAAY,WACjHV,EAAEmB,QAAQiB,QAAQ,YAIrB,OAAO,GAGR,IAAIC,GAAe,WAAWC,KAAKC,UAAUC,WAAa,iBAAmB,YACzEC,UAASC,YACZD,SAASC,YAAY,KAAKL,EAAe,SAASM,GACjD3C,EAAE,cAAciC,MAAK,KAEdQ,SAASG,kBACjBH,SAASG,iBAAiBP,EAAe,SAASM,GAEjD3C,EAAE,cAAciC,MAAK,KACnB,GAEJjC,EAAEmB,QAAQG,GAAG,SAAS,SAASqB,GAC9BE,aAAaxB,EACb,IAAIQ,GAAY7B,EAAEmB,QAAQW,WACvBD,GAAYd,EACdD,EAAGgC,SAAS,cAEZhC,EAAGiC,YAAY,cAEhB1B,EAAW2B,WAAW,WACrBhD,EAAE,gBAAgBa,KAAK,WACtB,GAAIN,GAAcP,EAAEY,MAChBqC,EAAoB1C,EAAYa,SAChC8B,EAAiB3C,EAAYS,SAASC,IAAMC,EAC5CO,EAAWlB,EAAYmB,KAAK,MAC5BpB,EAASN,EAAE,YAAYyB,EAAS,KAAKX,EAGtCe,GAAYqB,GAAkBrB,EAAaqB,EAAiBD,EAC1D3C,EAAOkB,GAAG,UACblB,EAAOwC,SAAS,OACDK,SAAX/C,EAAEC,MACLD,EAAEC,KAAKC,EAAQC,IAIdD,EAAOkB,GAAG,UACZlB,EAAOyC,YAAY,OACJI,SAAX/C,EAAEI,MACLJ,EAAEI,KAAKF,EAAQC,OAKlB,OAEHP,EAAEmB,QAAQiB,QAAQ,aAIrBpC,GAAEoD,GAAGC,UAAY,SAAUC,GAC1B,MAAIrD,GAAQqD,GACJrD,EAAQqD,GAAQC,MAAM3C,KAAM4C,MAAMC,UAAUC,MAAMC,KAAKC,UAAW,IAC7C,gBAAXN,IAAwBA,MAGzCtD,GAAE6D,MAAM,SAAWP,EAAS,qCAFrBrD,EAAQC,KAAKqD,MAAM3C,KAAMgD,aAKhCE","file":"jquery.liLanding.js","sourcesContent":["/*\r\n * jQuery liLanding v 2.1\r\n *\r\n * Copyright 2013, Linnik Yura | LI MASS CODE | http://masscode.ru\r\n * Free to use\r\n *\r\n * Last Update: 19.06.2016\r\n */\r\n(function ($) {\r\n\tvar methods = {\r\n\t\tinit: function (options) {\r\n\t\t\tvar p = {\r\n\t\t\t\tshow: function (linkEl, landingItem) {}, \r\n\t\t\t\thide: function (linkEl, landingItem) {},\r\n\t\t\t\ttopMargin: 0,\r\n\t\t\t\tspeedFactor: 1\r\n\t\t\t};\r\n\t\t\tif (options) {\r\n\t\t\t\t$.extend(p, options);\r\n\t\t\t}\r\n\t\t\treturn this.each(function () {\r\n\t\t\t\tvar el = $(this);\r\n\t\t\t\tvar elPos = el.offset().top;\r\n\t\t\t\tvar wHalf = $(window).height()/2\r\n\t\t\t\tvar scrollId = function(){};\r\n\t\t\t\t\r\n\t\t\t\t//assign events only links with anchors\r\n\t\t\t\t$('a[href^=#]',el).on('click',function(){\r\n\t\t\t\t\tvar linkItem = $(this);\r\n\t\t\t\t\tif(!linkItem.is('.cur')){\r\n\t\t\t\t\t\tvar linkHref = linkItem.attr('href');\r\n\t\t\t\t\t\tvar linkTarget = $(linkHref);\r\n\t\t\t\t\t\tvar linkTargetPos = linkTarget.offset().top;\r\n\t\t\t\t\t\tvar windowPos = $(window).scrollTop();\r\n\t\t\t\t\t\tvar animDuration = linkTargetPos - windowPos\r\n\t\t\t\t\t\tif(animDuration < 0){\r\n\t\t\t\t\t\t\tanimDuration = animDuration*-1\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//scroll the page to the desired block\r\n\t\t\t\t\t\tif(linkTarget.length){\r\n\t\t\t\t\t\t\t$('html, body').stop(true).animate({scrollTop:(linkTargetPos-parseFloat(p.topMargin))},animDuration*p.speedFactor,function(){\r\n\t\t\t\t\t\t\t\t$(window).trigger('scroll');\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t})\r\n\t\t\t\t//stop the animation by scrolling\r\n\t\t\t\tvar mousewheelevt=(/Firefox/i.test(navigator.userAgent))? \"DOMMouseScroll\" : \"mousewheel\" //FF doesn't recognize mousewheel as of FF3.x\r\n\t\t\t\tif (document.attachEvent) //if IE (and Opera depending on user setting)\r\n\t\t\t\t\tdocument.attachEvent(\"on\"+mousewheelevt, function(e){\r\n\t\t\t\t\t\t$('html, body').stop(true);\t\t\r\n\t\t\t\t\t});\r\n\t\t\t\telse if (document.addEventListener) //WC3 browsers\r\n\t\t\t\t\tdocument.addEventListener(mousewheelevt, function(e){\r\n\t\t\t\t\t\t//e.detail //direction\r\n\t\t\t\t\t\t$('html, body').stop(true);\r\n\t\t\t\t\t}, false)\r\n\t\t\t\t//highlight the desired link in the menu by scrolling\r\n\t\t\t\t$(window).on('scroll',function(e){\r\n\t\t\t\t\tclearTimeout(scrollId);\r\n\t\t\t\t\tvar windowPos = $(window).scrollTop();\r\n\t\t\t\t\tif(windowPos > elPos){\r\n\t\t\t\t\t\tel.addClass('landingFix');\t\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tel.removeClass('landingFix');\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\tscrollId = setTimeout(function(){\r\n\t\t\t\t\t\t$('.landingItem').each(function(){\r\n\t\t\t\t\t\t\tvar landingItem = $(this);\r\n\t\t\t\t\t\t\tvar landingItemHeight = landingItem.height();\r\n\t\t\t\t\t\t\tvar landingItemTop = landingItem.offset().top - wHalf;\r\n\t\t\t\t\t\t\tvar linkHref = landingItem.attr('id');\r\n\t\t\t\t\t\t\tvar linkEl = $('a[href=\"#'+linkHref+'\"]',el);\r\n\t\t\t\t\t\t\tvar status;\r\n\r\n\t\t\t\t\t\t\tif(windowPos > landingItemTop && windowPos < (landingItemTop + landingItemHeight)){\r\n\t\t\t\t\t\t\t\tif(!linkEl.is('.cur')){\r\n\t\t\t\t\t\t\t\t\tlinkEl.addClass('cur');\r\n\t\t\t\t\t\t\t\t\tif (p.show !== undefined) {\r\n\t\t\t\t\t\t\t\t\t\tp.show(linkEl, landingItem);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tif(linkEl.is('.cur')){\r\n\t\t\t\t\t\t\t\t\tlinkEl.removeClass('cur');\r\n\t\t\t\t\t\t\t\t\tif (p.hide !== undefined) {\r\n\t\t\t\t\t\t\t\t\t\tp.hide(linkEl, landingItem);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},100);\r\n\t\t\t\t})\r\n\t\t\t\t$(window).trigger('scroll');\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t$.fn.liLanding = function (method) {\r\n\t\tif (methods[method]) {\r\n\t\t\treturn methods[method].apply(this, Array.prototype.slice.call(arguments, 1));\r\n\t\t} else if (typeof method === 'object' || !method) {\r\n\t\t\treturn methods.init.apply(this, arguments);\r\n\t\t} else {\r\n\t\t\t$.error('Метод ' + method + ' в jQuery.liLanding не существует');\r\n\t\t}\r\n\t};\r\n})(jQuery);"]}